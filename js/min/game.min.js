
window.buoy=function(s,e){"use strict";var n=e.documentElement.classList,t=function(s,e){return n?s.classList.contains(e):new RegExp("(^|\\s)"+e+"(\\s|$)").test(s.className)},a=function(s,e){t(s,e)||(n?s.classList.add(e):s.className+=(s.className?" ":"")+e)},c=function(s,e){t(s,e)&&(n?s.classList.remove(e):s.className=s.className.replace(new RegExp("(^|\\s)*"+e+"(\\s|$)*","g"),""))},i=function(s,e){n?s.classList.toggle(e):t(s,e)?c(s,e):a(s,e)},l=function(s){for(var e=[],n=s.parentNode.firstChild;n;n=n.nextSibling)1==n.nodeType&&n!=s&&e.push(n);return e};return{toggleClass:i,removeClass:c,addClass:a,hasClass:t,getSiblings:l}}(window,document);
function overlayOn(){var e=document.querySelector(".overlay");buoy.addClass(e,"active")}[].forEach.call(document.querySelectorAll(".home button"),function(e){e.addEventListener("click",function(){function e(){o.destroy(),buoy.removeClass(t.parentNode,"active"),buoy.removeClass(r,"active"),t.innerHTML=""}var n,o,t=document.querySelector(".overlay .modal"),r=document.querySelector(".game");if(buoy.hasClass(this,"create")){buoy.addClass(r,"active"),overlayOn();var a=Math.random().toString(36).substr(2,5);t.innerHTML+="<h4>Your room id is...</h4>",t.innerHTML+="<h2>"+a+"</h2>",t.innerHTML+="<p>Give this code to your friend to join/watch!</p>",t.innerHTML+='<p class="light"><i class="fa fa-spinner"></i> Waiting for someone to join...',t.innerHTML+='<button class="cancel">Cancel</button>',o=new Peer("dwo"+a,{key:"fbpvikd79qpsnhfr",debug:3}),o.on("connection",function(e){n=e,e.on("open",function(){buoy.removeClass(t.parentNode,"active")})}),document.querySelector(".overlay .cancel").addEventListener("click",function(){e()})}else buoy.hasClass(this,"join")?(buoy.addClass(r,"active"),overlayOn(),t.innerHTML+="<h4>Enter Room ID to join:</h4>",t.innerHTML+='<input type="text">',t.innerHTML+='<button class="cancel">Cancel</button>',o=new Peer({key:"fbpvikd79qpsnhfr",debug:3}),document.querySelector(".overlay input").addEventListener("keypress",function(e){e||(e=window.event);var r=e.keyCode||e.which;if("13"==r){var a=this.value.replace(/\s+/g,"");return n=o.connect("dwo"+a,{reliable:!0}),n.on("open",function(){buoy.removeClass(t.parentNode,"active")}),!1}}),document.querySelector(".overlay .cancel").addEventListener("click",function(){e()})):buoy.hasClass(this,"build")})});